'use strict';var cov_mn6pn2uel=function(){var path="/home/somto/Andela/We-Connect/lib/server/controllers/reviews.js",hash="f1c1407630ebe27e515336d96225e11d806709f1",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/somto/Andela/We-Connect/lib/server/controllers/reviews.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:14},end:{line:7,column:34}},"2":{start:{line:9,column:15},end:{line:9,column:46}},"3":{start:{line:12,column:2},end:{line:12,column:56}},"4":{start:{line:15,column:11},end:{line:15,column:36}},"5":{start:{line:16,column:13},end:{line:16,column:20}},"6":{start:{line:18,column:24},end:{line:79,column:1}},"7":{start:{line:20,column:4},end:{line:22,column:5}},"8":{start:{line:21,column:6},end:{line:21,column:67}},"9":{start:{line:24,column:4},end:{line:32,column:7}},"10":{start:{line:29,column:6},end:{line:29,column:42}},"11":{start:{line:31,column:6},end:{line:31,column:41}},"12":{start:{line:35,column:4},end:{line:39,column:7}},"13":{start:{line:36,column:6},end:{line:36,column:43}},"14":{start:{line:38,column:6},end:{line:38,column:41}},"15":{start:{line:42,column:4},end:{line:63,column:7}},"16":{start:{line:43,column:6},end:{line:45,column:7}},"17":{start:{line:44,column:8},end:{line:44,column:69}},"18":{start:{line:46,column:6},end:{line:48,column:7}},"19":{start:{line:47,column:8},end:{line:47,column:76}},"20":{start:{line:49,column:6},end:{line:51,column:7}},"21":{start:{line:50,column:8},end:{line:50,column:80}},"22":{start:{line:52,column:6},end:{line:60,column:9}},"23":{start:{line:57,column:8},end:{line:57,column:50}},"24":{start:{line:59,column:8},end:{line:59,column:43}},"25":{start:{line:62,column:6},end:{line:62,column:41}},"26":{start:{line:66,column:4},end:{line:77,column:7}},"27":{start:{line:67,column:6},end:{line:69,column:7}},"28":{start:{line:68,column:8},end:{line:68,column:69}},"29":{start:{line:70,column:6},end:{line:74,column:9}},"30":{start:{line:71,column:8},end:{line:71,column:38}},"31":{start:{line:73,column:8},end:{line:73,column:43}},"32":{start:{line:76,column:6},end:{line:76,column:41}},"33":{start:{line:81,column:0},end:{line:81,column:36}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:11,column:9},end:{line:11,column:31}},loc:{start:{line:11,column:37},end:{line:13,column:1}},line:11},"1":{name:"create",decl:{start:{line:19,column:19},end:{line:19,column:25}},loc:{start:{line:19,column:36},end:{line:33,column:3}},line:19},"2":{name:"(anonymous_2)",decl:{start:{line:28,column:12},end:{line:28,column:13}},loc:{start:{line:28,column:30},end:{line:30,column:5}},line:28},"3":{name:"(anonymous_3)",decl:{start:{line:30,column:13},end:{line:30,column:14}},loc:{start:{line:30,column:30},end:{line:32,column:5}},line:30},"4":{name:"list",decl:{start:{line:34,column:17},end:{line:34,column:21}},loc:{start:{line:34,column:32},end:{line:40,column:3}},line:34},"5":{name:"(anonymous_5)",decl:{start:{line:35,column:81},end:{line:35,column:82}},loc:{start:{line:35,column:100},end:{line:37,column:5}},line:35},"6":{name:"(anonymous_6)",decl:{start:{line:37,column:13},end:{line:37,column:14}},loc:{start:{line:37,column:30},end:{line:39,column:5}},line:37},"7":{name:"update",decl:{start:{line:41,column:19},end:{line:41,column:25}},loc:{start:{line:41,column:36},end:{line:64,column:3}},line:41},"8":{name:"(anonymous_8)",decl:{start:{line:42,column:53},end:{line:42,column:54}},loc:{start:{line:42,column:71},end:{line:61,column:5}},line:42},"9":{name:"(anonymous_9)",decl:{start:{line:56,column:14},end:{line:56,column:15}},loc:{start:{line:56,column:38},end:{line:58,column:7}},line:56},"10":{name:"(anonymous_10)",decl:{start:{line:58,column:15},end:{line:58,column:16}},loc:{start:{line:58,column:32},end:{line:60,column:7}},line:58},"11":{name:"(anonymous_11)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:30},end:{line:63,column:5}},line:61},"12":{name:"destroy",decl:{start:{line:65,column:20},end:{line:65,column:27}},loc:{start:{line:65,column:38},end:{line:78,column:3}},line:65},"13":{name:"(anonymous_13)",decl:{start:{line:66,column:53},end:{line:66,column:54}},loc:{start:{line:66,column:71},end:{line:75,column:5}},line:66},"14":{name:"(anonymous_14)",decl:{start:{line:70,column:35},end:{line:70,column:36}},loc:{start:{line:70,column:47},end:{line:72,column:7}},line:70},"15":{name:"(anonymous_15)",decl:{start:{line:72,column:15},end:{line:72,column:16}},loc:{start:{line:72,column:32},end:{line:74,column:7}},line:72},"16":{name:"(anonymous_16)",decl:{start:{line:75,column:13},end:{line:75,column:14}},loc:{start:{line:75,column:30},end:{line:77,column:5}},line:75}},branchMap:{"0":{loc:{start:{line:12,column:9},end:{line:12,column:55}},type:"cond-expr",locations:[{start:{line:12,column:33},end:{line:12,column:36}},{start:{line:12,column:39},end:{line:12,column:55}}],line:12},"1":{loc:{start:{line:12,column:9},end:{line:12,column:30}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:12}},{start:{line:12,column:16},end:{line:12,column:30}}],line:12},"2":{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:20,column:4},end:{line:22,column:5}}],line:20},"3":{loc:{start:{line:20,column:8},end:{line:20,column:70}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:26}},{start:{line:20,column:30},end:{line:20,column:46}},{start:{line:20,column:50},end:{line:20,column:70}}],line:20},"4":{loc:{start:{line:43,column:6},end:{line:45,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:45,column:7}},{start:{line:43,column:6},end:{line:45,column:7}}],line:43},"5":{loc:{start:{line:46,column:6},end:{line:48,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:48,column:7}},{start:{line:46,column:6},end:{line:48,column:7}}],line:46},"6":{loc:{start:{line:49,column:6},end:{line:51,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:51,column:7}},{start:{line:49,column:6},end:{line:51,column:7}}],line:49},"7":{loc:{start:{line:53,column:18},end:{line:53,column:54}},type:"binary-expr",locations:[{start:{line:53,column:18},end:{line:53,column:35}},{start:{line:53,column:39},end:{line:53,column:54}}],line:53},"8":{loc:{start:{line:54,column:16},end:{line:54,column:48}},type:"binary-expr",locations:[{start:{line:54,column:16},end:{line:54,column:31}},{start:{line:54,column:35},end:{line:54,column:48}}],line:54},"9":{loc:{start:{line:67,column:6},end:{line:69,column:7}},type:"if",locations:[{start:{line:67,column:6},end:{line:69,column:7}},{start:{line:67,column:6},end:{line:69,column:7}}],line:67}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},_coverageSchema:"d34fc3e6b8297bcde183f5492bcb8fcb36775295"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_mn6pn2uel.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _models=(cov_mn6pn2uel.s[1]++,require('../models'));var _models2=(cov_mn6pn2uel.s[2]++,_interopRequireDefault(_models));function _interopRequireDefault(obj){cov_mn6pn2uel.f[0]++;cov_mn6pn2uel.s[3]++;return(cov_mn6pn2uel.b[1][0]++,obj)&&(cov_mn6pn2uel.b[1][1]++,obj.__esModule)?(cov_mn6pn2uel.b[0][0]++,obj):(cov_mn6pn2uel.b[0][1]++,{default:obj});}var _ref=(cov_mn6pn2uel.s[4]++,[_models2.default.Review]),Review=(cov_mn6pn2uel.s[5]++,_ref[0]);var reviewsController=(cov_mn6pn2uel.s[6]++,{create:function create(req,res){cov_mn6pn2uel.f[1]++;cov_mn6pn2uel.s[7]++;if((cov_mn6pn2uel.b[3][0]++,!req.body.response)||(cov_mn6pn2uel.b[3][1]++,!req.body.userId)||(cov_mn6pn2uel.b[3][2]++,!req.body.businessId)){cov_mn6pn2uel.b[2][0]++;cov_mn6pn2uel.s[8]++;return res.status(206).send({message:'Incomplete field'});}else{cov_mn6pn2uel.b[2][1]++;}cov_mn6pn2uel.s[9]++;return Review.create({response:req.body.response,userId:req.body.userId,businessId:req.params.businessId}).then(function(review){cov_mn6pn2uel.f[2]++;cov_mn6pn2uel.s[10]++;return res.status(201).send(review);}).catch(function(error){cov_mn6pn2uel.f[3]++;cov_mn6pn2uel.s[11]++;return res.status(400).send(error);});},list:function list(req,res){cov_mn6pn2uel.f[4]++;cov_mn6pn2uel.s[12]++;return Review.findAll({where:{businessId:req.params.businessId}}).then(function(reviews){cov_mn6pn2uel.f[5]++;cov_mn6pn2uel.s[13]++;return res.status(200).send(reviews);}).catch(function(error){cov_mn6pn2uel.f[6]++;cov_mn6pn2uel.s[14]++;return res.status(400).send(error);});},update:function update(req,res){cov_mn6pn2uel.f[7]++;cov_mn6pn2uel.s[15]++;return Review.findById(req.params.reviewId).then(function(review){cov_mn6pn2uel.f[8]++;cov_mn6pn2uel.s[16]++;if(!review){cov_mn6pn2uel.b[4][0]++;cov_mn6pn2uel.s[17]++;return res.status(404).send({message:'Review not found'});}else{cov_mn6pn2uel.b[4][1]++;}cov_mn6pn2uel.s[18]++;if(review.userId!==req.body.userId){cov_mn6pn2uel.b[5][0]++;cov_mn6pn2uel.s[19]++;return res.status(400).send({message:'User can not be altered'});}else{cov_mn6pn2uel.b[5][1]++;}cov_mn6pn2uel.s[20]++;if(review.businessId!==req.body.businessId){cov_mn6pn2uel.b[6][0]++;cov_mn6pn2uel.s[21]++;return res.status(400).send({message:'Business can not be altered'});}else{cov_mn6pn2uel.b[6][1]++;}cov_mn6pn2uel.s[22]++;return review.update({response:(cov_mn6pn2uel.b[7][0]++,req.body.response)||(cov_mn6pn2uel.b[7][1]++,review.response),userId:(cov_mn6pn2uel.b[8][0]++,req.body.userId)||(cov_mn6pn2uel.b[8][1]++,review.userId),businessId:req.params.businessId}).then(function(reviewUpdate){cov_mn6pn2uel.f[9]++;cov_mn6pn2uel.s[23]++;return res.status(200).send(reviewUpdate);}).catch(function(error){cov_mn6pn2uel.f[10]++;cov_mn6pn2uel.s[24]++;return res.status(400).send(error);});}).catch(function(error){cov_mn6pn2uel.f[11]++;cov_mn6pn2uel.s[25]++;return res.status(400).send(error);});},destroy:function destroy(req,res){cov_mn6pn2uel.f[12]++;cov_mn6pn2uel.s[26]++;return Review.findById(req.params.reviewId).then(function(review){cov_mn6pn2uel.f[13]++;cov_mn6pn2uel.s[27]++;if(!review){cov_mn6pn2uel.b[9][0]++;cov_mn6pn2uel.s[28]++;return res.status(404).send({message:'Review not found'});}else{cov_mn6pn2uel.b[9][1]++;}cov_mn6pn2uel.s[29]++;return review.destroy().then(function(){cov_mn6pn2uel.f[14]++;cov_mn6pn2uel.s[30]++;return res.status(204).send();}).catch(function(error){cov_mn6pn2uel.f[15]++;cov_mn6pn2uel.s[31]++;return res.status(400).send(error);});}).catch(function(error){cov_mn6pn2uel.f[16]++;cov_mn6pn2uel.s[32]++;return res.status(400).send(error);});}});cov_mn6pn2uel.s[33]++;exports.default=reviewsController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldmlld3MuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJfbW9kZWxzIiwicmVxdWlyZSIsIl9tb2RlbHMyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX3JlZiIsIlJldmlldyIsInJldmlld3NDb250cm9sbGVyIiwiY3JlYXRlIiwicmVxIiwicmVzIiwiYm9keSIsInJlc3BvbnNlIiwidXNlcklkIiwiYnVzaW5lc3NJZCIsInN0YXR1cyIsInNlbmQiLCJtZXNzYWdlIiwicGFyYW1zIiwidGhlbiIsInJldmlldyIsImNhdGNoIiwiZXJyb3IiLCJsaXN0IiwiZmluZEFsbCIsIndoZXJlIiwicmV2aWV3cyIsInVwZGF0ZSIsImZpbmRCeUlkIiwicmV2aWV3SWQiLCJyZXZpZXdVcGRhdGUiLCJkZXN0cm95Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsT0FBT0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFDM0NDLFNBQU87QUFEb0MsQ0FBN0M7O0FBSUEsSUFBSUMsVUFBVUMsUUFBUSxXQUFSLENBQWQ7O0FBRUEsSUFBSUMsV0FBV0MsdUJBQXVCSCxPQUF2QixDQUFmOztBQUVBLFNBQVNHLHNCQUFULENBQWdDQyxHQUFoQyxFQUFxQztBQUFFLFNBQU9BLE9BQU9BLElBQUlDLFVBQVgsR0FBd0JELEdBQXhCLEdBQThCLEVBQUVFLFNBQVNGLEdBQVgsRUFBckM7QUFBd0Q7O0FBRS9GLElBQUlHLE9BQU8sQ0FBQ0wsU0FBU0ksT0FBVCxDQUFpQkUsTUFBbEIsQ0FBWDtBQUFBLElBQ0lBLFNBQVNELEtBQUssQ0FBTCxDQURiOztBQUlBLElBQUlFLG9CQUFvQjtBQUN0QkMsVUFBUSxTQUFTQSxNQUFULENBQWdCQyxHQUFoQixFQUFxQkMsR0FBckIsRUFBMEI7QUFDaEMsUUFBSSxDQUFDRCxJQUFJRSxJQUFKLENBQVNDLFFB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b25uZWN0L2xpYi9zZXJ2ZXIvY29udHJvbGxlcnMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbW9kZWxzID0gcmVxdWlyZSgnLi4vbW9kZWxzJyk7XG5cbnZhciBfbW9kZWxzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21vZGVscyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBfcmVmID0gW19tb2RlbHMyLmRlZmF1bHQuUmV2aWV3XSxcbiAgICBSZXZpZXcgPSBfcmVmWzBdO1xuXG5cbnZhciByZXZpZXdzQ29udHJvbGxlciA9IHtcbiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUocmVxLCByZXMpIHtcbiAgICBpZiAoIXJlcS5ib2R5LnJlc3BvbnNlIHx8ICFyZXEuYm9keS51c2VySWQgfHwgIXJlcS5ib2R5LmJ1c2luZXNzSWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwNikuc2VuZCh7IG1lc3NhZ2U6ICdJbmNvbXBsZXRlIGZpZWxkJyB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gUmV2aWV3LmNyZWF0ZSh7XG4gICAgICByZXNwb25zZTogcmVxLmJvZHkucmVzcG9uc2UsXG4gICAgICB1c2VySWQ6IHJlcS5ib2R5LnVzZXJJZCxcbiAgICAgIGJ1c2luZXNzSWQ6IHJlcS5wYXJhbXMuYnVzaW5lc3NJZFxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJldmlldykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5zZW5kKHJldmlldyk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyb3IpO1xuICAgIH0pO1xuICB9LFxuICBsaXN0OiBmdW5jdGlvbiBsaXN0KHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIFJldmlldy5maW5kQWxsKHsgd2hlcmU6IHsgYnVzaW5lc3NJZDogcmVxLnBhcmFtcy5idXNpbmVzc0lkIH0gfSkudGhlbihmdW5jdGlvbiAocmV2aWV3cykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHJldmlld3MpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGVycm9yKTtcbiAgICB9KTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUocmVxLCByZXMpIHtcbiAgICByZXR1cm4gUmV2aWV3LmZpbmRCeUlkKHJlcS5wYXJhbXMucmV2aWV3SWQpLnRoZW4oZnVuY3Rpb24gKHJldmlldykge1xuICAgICAgaWYgKCFyZXZpZXcpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ1JldmlldyBub3QgZm91bmQnIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHJldmlldy51c2VySWQgIT09IHJlcS5ib2R5LnVzZXJJZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoeyBtZXNzYWdlOiAnVXNlciBjYW4gbm90IGJlIGFsdGVyZWQnIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHJldmlldy5idXNpbmVzc0lkICE9PSByZXEuYm9keS5idXNpbmVzc0lkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IG1lc3NhZ2U6ICdCdXNpbmVzcyBjYW4gbm90IGJlIGFsdGVyZWQnIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldmlldy51cGRhdGUoe1xuICAgICAgICByZXNwb25zZTogcmVxLmJvZHkucmVzcG9uc2UgfHwgcmV2aWV3LnJlc3BvbnNlLFxuICAgICAgICB1c2VySWQ6IHJlcS5ib2R5LnVzZXJJZCB8fCByZXZpZXcudXNlcklkLFxuICAgICAgICBidXNpbmVzc0lkOiByZXEucGFyYW1zLmJ1c2luZXNzSWRcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJldmlld1VwZGF0ZSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQocmV2aWV3VXBkYXRlKTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyb3IpO1xuICAgIH0pO1xuICB9LFxuICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIFJldmlldy5maW5kQnlJZChyZXEucGFyYW1zLnJldmlld0lkKS50aGVuKGZ1bmN0aW9uIChyZXZpZXcpIHtcbiAgICAgIGlmICghcmV2aWV3KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdSZXZpZXcgbm90IGZvdW5kJyB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXZpZXcuZGVzdHJveSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDQpLnNlbmQoKTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyb3IpO1xuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSByZXZpZXdzQ29udHJvbGxlcjsiXX0=